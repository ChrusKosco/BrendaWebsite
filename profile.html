<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <style>
        body {
            font-family: Arial,sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }

        input, select {
            display: block;
            margin-bottom: 10px;
            padding: 10px;
            width: 300px;
        }

        button {
            padding: 10px;
            background: #0066cc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

            button:hover {
                background: #004999;
            }
    </style>
</head>
<body>
    <h2>Your Profile</h2>
    <!--Pages-->
    <nav>
        <button class="buttons" onclick="document.location='index.html'">
            Home
        </button>

        <button class="buttons" onclick="document.location='games.html'">
            Games
        </button>

        <button class="buttons" onclick="document.location='servers.html'">
            Servers
        </button>

        <button class="buttons" onclick="document.location='tv.html'">
            TV
        </button>

        <button class="buttons" onclick="document.location='store.html'">
            Store
        </button>

        <button class="buttons" onclick="document.location='forum.html'">
            Forum
        </button>

        <button class="buttons" onclick="document.location='account.html'">
            Account
        </button>

        <button class="buttons" onclick="document.location='aboutus.html'">
            About Us
        </button>
    </nav>
    <form id="profileForm">
        <input type="text" id="displayName" placeholder="Display Name" required>
        <input type="email" id="email" placeholder="Email" required>
        <input type="text" id="phone" placeholder="Phone">
        <input type="text" id="address" placeholder="Address">
        <input type="date" id="birthdate" placeholder="Birthdate">
        <select id="gender">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>
        <button type="submit">Update Profile</button>
    </form>
    <button onclick="logout()">Logout</button>

    <script>
        let loggedUser = JSON.parse(localStorage.getItem("loggedInUser"));
        if (!loggedUser) { alert("Login required"); window.location.href = "accounts.html"; }

        document.getElementById("displayName").value = loggedUser.profile.displayName;
        document.getElementById("email").value = loggedUser.profile.email;
        document.getElementById("phone").value = loggedUser.profile.phone;
        document.getElementById("address").value = loggedUser.profile.address;
        document.getElementById("birthdate").value = loggedUser.profile.birthdate;
        document.getElementById("gender").value = loggedUser.profile.gender;

        document.getElementById("profileForm").addEventListener("submit", function (e) {
            e.preventDefault();
            const displayName = document.getElementById("displayName").value;
            const email = document.getElementById("email").value;
            const phone = document.getElementById("phone").value;
            const address = document.getElementById("address").value;
            const birthdate = document.getElementById("birthdate").value;
            const gender = document.getElementById("gender").value;

            let users = JSON.parse(localStorage.getItem("users"));
            const idx = users.findIndex(u => u.username === loggedUser.username);
            if (idx > -1) {
                users[idx].profile = { displayName, email, phone, address, birthdate, gender };
                localStorage.setItem("users", JSON.stringify(users));
                loggedUser = users[idx];
                localStorage.setItem("loggedInUser", JSON.stringify(loggedUser));
                alert("Profile updated!");
            }
        });

        function logout() {
            localStorage.removeItem("loggedInUser");
            window.location.href = "index.html";
        }
    </script>
</body>
</html>
